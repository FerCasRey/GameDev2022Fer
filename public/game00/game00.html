<!DOCTYPE html>
<html>
    <head>
        <title>Level 2</title>
        <style>
            body {
                background-color: #969494;
                color: white;
            }      
            .light-mode {
                background-color: white;
                color: black;
            }
            a:visited {
                color: lightGreen;
            }
        </style>
    </head>
    <body>
        <h5 onclick="{location = 'computer.html'}">Version 1.0.0</h5><br>
        <h1 align=center>Level 2</h1>
        <p align=center><a href="https://fercasrey.github.io/GameDev2022Fer/public/">EXIT</a><br></p>
        <p align=center style="color: #a5a5a5;  font-size:20pt ;">NOW RUN AWAY</p>

        <hr>
      
        <img id="myDog" style="height:80px; width: 150px; position: absolute; left: 0px;   top:340px; " src="https://fercasrey.github.io/GameDev2022Fer/public/dogToRight.png"></img>
        <img id="myCat" style="height:80px; width: 100px; position: absolute; left: 200px; top:340px; " src="cat01.png"></img><br>
        <button id="runBut" onclick="run()">RUN</button>
        <div id="exit" style="position: absolute; top: 250px; left: -400px; border: 1px solid red; background-color: rgb(0, 0, 0); font-size: 20pt; box-shadow: 2px;">Playing time limit reached</div>
        <div id="exit1" onclick="{location = 'computer.html'}" style="position: absolute; top: 290px; left: -290px; border: 1px solid red; background-color: black; font-size: 20pt; color: red; box-shadow: 2px;">Close</div>
    </body>
    <script>
        catPos = 0
        switchSound = 0
        mySteps = 0
        let myClock
        let myClock2

        //Funciones
        function run() {
            
            moveCat()
            mySteps++
            console.log(mySteps)
            barkTime()
            if (mySteps%5 == 0) {
                moveDogTime()
                console.log('ye')
            }
            //if (switchSound == 0) {
                //mySound1.play()
                //switchSound++
                //console.log('HAY')
            //}
            
            myCheckHit()
        }

        function barkTime() {
            console.log('Start')
            clearInterval(myClock2);
            myClock2 = setInterval(bark(), 1000);
            console.log('Abi');
        }

        function bark() {
            mySound1.play()
            console.log('Abi2')
        }
        
        function moveDogTime() {
            console.log('ye2')
            clearInterval(myClock)
            myClock = setInterval(moveDog(), 100)
            console.log('ye3')
        }
        function moveDog() {
            document.getElementById('myDog').style.left = parseInt(document.getElementById('myDog').style.left) + 57 + 'px';
        }
        function moveCat() {
            document.getElementById('myCat').style.left = parseInt(document.getElementById('myCat').style.left) + 10 + 'px';
            if (catPos == 0) {
                document.getElementById("myCat").src = "cat02.png";
                catPos++
            } else if (catPos == 1) {
                document.getElementById("myCat").src = "cat03.png";
                catPos++
            } else if (catPos == 2) {
                document.getElementById("myCat").src = "cat04.png";
                catPos++
            } else if (catPos == 3) {
                document.getElementById("myCat").src = "cat05.png";
                catPos++
            } else if (catPos == 1) {
                document.getElementById("myCat").src = "cat06.png";
                catPos++
            } else {
                document.getElementById("myCat").src = "cat01.png";
                catPos = 0
            }
        }
        let mySound1 = new Audio('https://fercasrey.github.io/GameDev2022Fer/public/bark.mp3')

        //hitbox code by Ellis
        function myHitOther(my1,my2){
            left1   = parseInt(document.getElementById(my1).style.left)
            right1  = left1 + parseInt(document.getElementById(my1).style.width)
            top1    = parseInt(document.getElementById(my1).style.top)   
            bottom1 = top1   + parseInt(document.getElementById(my1).style.height)
            left2   = parseInt(document.getElementById(my2).style.left)
            right2  = left2 + parseInt(document.getElementById(my2).style.width)
            top2    = parseInt(document.getElementById(my2).style.top)   
            bottom2 = top2   + parseInt(document.getElementById(my2).style.height)
            if ((right1  >=  (left2 + 40)  ) &&      	   
            (bottom1 >=  top2   ) &&
            (left1   <=  right2 ) &&
            (top1    <=  bottom2) ){
                return true
            }
        }
        function myCheckHit(){
            if ( myHitOther('myDog','myCat') ){
                //create menu that appears on death to close the game and go to computer
                alert("You lose!");
                document.getElementById('runBut').disabled = true;
                document.getElementById('exit').style.left = parseInt(document.getElementById('exit').style.left) + 1000 + 'px';
                document.getElementById('exit1').style.left = parseInt(document.getElementById('exit1').style.left) + 1000 + 'px';
                document.getElementById('exit').style.alignContent = center;
                document.getElementById('exit1').style.alignContent = center;
            }
      
        } 
    </script>
</html>
